# ============================================================================
# CONFIGURAÇÕES CENTRALIZADAS - PIPELINE CDC COMPLETO
# ============================================================================
# Todas as credenciais padronizadas para admin/admin para facilitar o uso

# ===== CREDENCIAIS PADRÃO =====
DEFAULT_USER=admin
DEFAULT_PASSWORD=admin

# ===== POSTGRESQL SOURCE =====
POSTGRES_SOURCE_USER=${DEFAULT_USER}
POSTGRES_SOURCE_PASSWORD=${DEFAULT_PASSWORD}
POSTGRES_SOURCE_DB_NAME=db_source
POSTGRES_SOURCE_PORT=5430

# ===== POSTGRESQL TARGET (para Airbyte) =====
POSTGRES_TARGET_USER=${DEFAULT_USER}
POSTGRES_TARGET_PASSWORD=${DEFAULT_PASSWORD}
POSTGRES_TARGET_DB_NAME=db_target
POSTGRES_TARGET_PORT=5431

# ===== AIRBYTE =====
AIRBYTE_DB_USER=${DEFAULT_USER}
AIRBYTE_DB_PASSWORD=${DEFAULT_PASSWORD}
AIRBYTE_DB_NAME=airbyte
AIRBYTE_API_URL=http://localhost:8000/api/v1
AIRBYTE_WORKSPACE_ROOT=/workspace
AIRBYTE_LOCAL_ROOT=/tmp/airbyte_local
STORAGE_TYPE=local
AIRBYTE_CLOUD_STORAGE_BUCKET_LOG=/tmp/airbyte_logs
AIRBYTE_CLOUD_STORAGE_BUCKET_STATE=/tmp/airbyte_state
AIRBYTE_CLOUD_STORAGE_BUCKET_WORKLOAD_OUTPUT=/tmp/airbyte_workload_output
AIRBYTE_CLOUD_STORAGE_BUCKET_ACTIVITY_PAYLOAD=/tmp/airbyte_activity_payload
# AIRBYTE_TEMPORAL_PORT=7233 # Removido - não necessário para projeto DBT

# ===== AIRBYTE PERFORMANCE =====
LOG_LEVEL=INFO
JOB_MAIN_CONTAINER_CPU_REQUEST=1
JOB_MAIN_CONTAINER_CPU_LIMIT=2
JOB_MAIN_CONTAINER_MEMORY_REQUEST=2Gi
JOB_MAIN_CONTAINER_MEMORY_LIMIT=4Gi
AUTO_DETECT_SCHEMA=true
USE_STREAM_CAPABLE_STATE=true
SHOULD_RUN_NOTIFY_WORKFLOWS=true
MAX_SYNC_JOB_ATTEMPTS=3
MAX_SPEC_JOB_ATTEMPTS=3
MAX_CHECK_JOB_ATTEMPTS=3
MAX_DISCOVER_JOB_ATTEMPTS=3
SYNC_JOB_MAX_TIMEOUT_DAYS=3

# ===== DATA LAKE (MinIO) =====
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
MINIO_CONSOLE_PORT=9001
MINIO_API_PORT=9000

# ===== DBT - CONECTANDO AO BANCO ÚNICO =====
DBT_TARGET_TYPE=postgres
DBT_TARGET_HOST=postgres_source
DBT_TARGET_PORT=5432
DBT_TARGET_USER=${DEFAULT_USER}
DBT_TARGET_PASSWORD=${DEFAULT_PASSWORD}
DBT_TARGET_DB=${POSTGRES_SOURCE_DB_NAME}
DBT_TARGET_SCHEMA=public

# ===== APIS EXTERNAS =====
# APIs Simuladas - REMOVIDAS (projeto focado em DBT)
# ECOMMERCE_API_PORT=8010
# CRM_API_PORT=8011

# ===== AIRBYTE PORTS =====
AIRBYTE_WEBAPP_PORT=8080
AIRBYTE_SERVER_PORT=8000
# AIRBYTE_TEMPORAL_PORT=7233 # Removido - não necessário para projeto DBT


# ===== CDC REPLICATION USER & SETTINGS =====
AIRBYTE_REPLICATION_USER=airbyte_replication
AIRBYTE_REPLICATION_PASSWORD=airbyte_pass
AIRBYTE_REPLICATION_PUBLICATION=airbyte_publication
AIRBYTE_REPLICATION_SLOT=airbyte_slot

# ===== OUTROS SERVIÇOS =====
DASHBOARD_PORT=8501

# ===== CONFIGURAÇÕES AVANÇADAS =====
# PostgreSQL CDC
POSTGRES_WAL_LEVEL=logical
POSTGRES_MAX_WAL_SENDERS=10
POSTGRES_MAX_REPLICATION_SLOTS=10
POSTGRES_MAX_LOGICAL_REPLICATION_WORKERS=10

# MinIO Buckets
MINIO_BUCKET_BRONZE=bronze-data
MINIO_BUCKET_SILVER=silver-data
MINIO_BUCKET_GOLD=gold-data
MINIO_BUCKET_AIRBYTE=airbyte-data